!function(e){var t=null,n=[],r=!1;e.fn.redraw=function(){n.forEach(e=>{e.beginPath(),e.stroke()})},e.fn.setColor=function(e,n){t.color=e,t.brushSize=n},e.fn.ribbon=function(o){var i,s,a,u;return t=e.extend({},e.fn.ribbon.defaults,o),this.each(function(){e(this).parent(),i=this,n.push(this.getContext("2d")),i.style.cursor="crosshair",e(this).attr("width",t.screenWidth).attr("height",t.screenHeight),s=[],[],[],function(){a=t.screenWidth/2,u=t.screenHeight/2;for(var e=0;e<t.strokes;e++){var n=.05*Math.random()+t.easing;s.push({dx:t.screenWidth/2,dy:t.screenHeight/2,ax:0,ay:0,div:.1,ease:n})}}(this.context),i.addEventListener("mousedown",m,!1),i.addEventListener("touchstart",g,!1)});function c(e,t){var n=e.getBoundingClientRect(),r=e.width/n.width,o=e.height/n.height;return{x:(t.clientX-n.left)*r,y:(t.clientY-n.top)*o}}function d(){!function(){clearInterval(this.interval),r=!1}()}function h(e){e.preventDefault(),v(e.touches[0])}function v(e){var r=c(i,e);a=r.x,u=r.y,id=parseInt(e.target.id.substring(5)),function(e){var n;for(e.lineWidth=t.brushSize,0!=t.color[0]||0!=t.color[1]||0!=t.color[2]?e.globalAlpha=.05:e.globalAlpha=1,e.strokeStyle="rgba("+t.color[0]+", "+t.color[1]+", "+t.color[2]+", "+t.brushPressure+")",n=0;n<s.length;n++){e.beginPath();var r=s[n].dx,o=s[n].dy;e.moveTo(r,o);var i=s[n].ax=(s[n].ax+(s[n].dx-a)*s[n].div)*s[n].ease;s[n].dx-=i;var c=s[n].dx,d=s[n].ay=(s[n].ay+(s[n].dy-u)*s[n].div)*s[n].ease;s[n].dy-=d;var h=s[n].dy;e.lineTo(c,h),e.stroke()}}(n[id])}function l(e){f()}function f(e){d(),i.removeEventListener("mousemove",v,!1),i.removeEventListener("mouseup",f,!1),i.removeEventListener("mouseout",l,!1),i.removeEventListener("touchmove",h,!1),i.removeEventListener("touchend",l,!1),i.removeEventListener("touchcancel",l,!1)}function g(e){e.preventDefault(),m(e.touches[0])}function m(e){!function(e){r||(r=!0);var t=c(i,e);a=t.x,u=t.y;for(var n=0,o=s.length;n<o;n++)s[n].dx=a,s[n].dy=u}(e),i.addEventListener("mouseup",f,!1),i.addEventListener("mouseout",l,!1),i.addEventListener("mousemove",v,!1),i.addEventListener("touchmove",h,!1),i.addEventListener("touchend",l,!1),i.addEventListener("touchcancel",l,!1)}},e.fn.ribbon.defaults={canvas:null,context:null,container:null,userAgent:e.browser,screenWidth:e(window).width(),screenHeight:e(window).height(),duration:6e3,fadesteps:10,strokes:15,refreshRate:30,easing:.7,brushSize:4,brushPressure:1,color:[0,50,0],backgroundColor:[255,255,255],brush:null,mouseX:0,mouseY:0,i:0}}(jQuery);